{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// функції для HTTP-запитів.\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//----замінити ключ на свій, коли вийде зареєструватися-------------\nconst API_KEY = '43173775-fc7269b10cca3a5d436001063';\n\nexport function fetchImages(userRequest) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: userRequest,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  return fetch(`https://pixabay.com/api/?${params}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status); // Перевірка статусу відповіді сервера\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0) {\n        //перевірка наявності зображень у відповіді\n        throw new Error(\n          'Sorry, there are no images matching <br>your search query.Please try again!'\n        ); // Генерується помилка, якщо список зображень порожній\n      }\n      return data.hits;\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        message: error.message,\n        backgroundColor: '#EF4040',\n        messageColor: '#FAFAFB',\n        position: 'topRight',\n      });\n      throw error;\n    });\n}\n","// функції для відображення елементів інтерфейсу.\n\nexport function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        likes,\n        views,\n        comments,\n        downloads,\n        webformatURL,\n        largeImageURL,\n        tags,\n        id,\n      }) => `<li data-id=\"${id}\">\n      <div class=\"gallery\">\n        <a class='large-image' href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"preview-image\" width=\"360\" height=\"152\">\n        </a>\n      </div>\n      <div class=\"info-container\">\n        <div class=\"info-box\">\n          <span class=\"label\">Likes</span>\n          <span class=\"data-label\">${likes}</span>\n        </div>\n        <div class=\"info-box\">\n          <span class=\"label\">Views</span>\n          <span class=\"data-label\">${views}</span>\n        </div>\n        <div class=\"info-box\">\n          <span class=\"label\">Comments</span>\n          <span class=\"data-label\">${comments}</span>\n        </div>\n        <div class=\"info-box\">\n          <span class=\"label\">Downloads</span>\n          <span class=\"data-label\">${downloads}</span>\n        </div>\n      </div>\n  </li>`\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { createMarkup } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('form');\nconst searchInput = document.querySelector('input');\nconst list = document.querySelector('ul');\nconst loaders = document.getElementById('spinner');\n\nsearchInput.addEventListener('input', handleInput);\nsearchForm.addEventListener('submit', handleSubmit);\n\nlet userRequest; // Змінна для запиту користувача\nlet lightbox; // Змінна для SimpleLightbox\n\nfunction handleInput(event) {\n  userRequest = event.target.value.trim().toLowerCase();\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  list.innerHTML = ''; // Очищення списку перед новим пошуком\n\n  if (!userRequest || userRequest.trim() === '') {\n    iziToast.error({\n      message: 'Sorry, the query field is empty.',\n      backgroundColor: '#EF4040',\n      messageColor: '#FAFAFB',\n      position: 'topRight',\n    });\n    searchInput.value = ''; // Очищення поля вводу\n    userRequest = ''; // Обнулення змінної userRequest\n    return;\n  }\n\n  loaders.style.display = 'block'; // Показує спінер\n\n  fetchImages(userRequest)\n    .then(images => {\n      list.innerHTML = ''; // Очищення списку перед новим пошуком\n      list.insertAdjacentHTML('beforeend', createMarkup(images));\n      // Ініціалізація SimpleLightbox\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a', {\n          nav: true,\n          captions: true,\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh(); // Оновлення SimpleLightbox\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n    })\n    .finally(() => {\n      loaders.style.display = 'none'; // Приховує спінер\n      searchInput.value = ''; // Очищення поля вводу\n      userRequest = ''; // Обнулення змінної userRequest\n    });\n}\n"],"names":["API_KEY","fetchImages","userRequest","params","response","data","error","iziToast","createMarkup","arr","likes","views","comments","downloads","webformatURL","largeImageURL","tags","id","searchForm","searchInput","list","loaders","handleInput","handleSubmit","lightbox","event","images","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAU,qCAET,SAASC,EAAYC,EAAa,CACvC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAED,OAAO,MAAM,4BAA4BC,CAAM,EAAE,EAC9C,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAEvB,MAAM,IAAI,MACR,6EACV,EAEM,OAAOA,EAAK,IAClB,CAAK,EACA,MAAMC,GAAS,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EAC7CC,EAAS,MAAM,CACb,QAASD,EAAM,QACf,gBAAiB,UACjB,aAAc,UACd,SAAU,UAClB,CAAO,EACKA,CACZ,CAAK,CACL,CCzCO,SAASE,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,GAAAC,CACR,IAAY,gBAAgBA,CAAE;AAAA;AAAA,uCAESF,CAAa;AAAA,sBAC9BD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAMXN,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,qCAIRC,CAAS;AAAA;AAAA;AAAA,QAIzC,EACA,KAAK,EAAE,CACZ,CChCA,MAAMK,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAc,SAAS,cAAc,OAAO,EAC5CC,EAAO,SAAS,cAAc,IAAI,EAClCC,EAAU,SAAS,eAAe,SAAS,EAEjDF,EAAY,iBAAiB,QAASG,CAAW,EACjDJ,EAAW,iBAAiB,SAAUK,CAAY,EAElD,IAAIrB,EACAsB,EAEJ,SAASF,EAAYG,EAAO,CAC1BvB,EAAcuB,EAAM,OAAO,MAAM,KAAI,EAAG,aAC1C,CAEA,SAASF,EAAaE,EAAO,CAI3B,GAHAA,EAAM,eAAc,EACpBL,EAAK,UAAY,GAEb,CAAClB,GAAeA,EAAY,KAAI,IAAO,GAAI,CAC7CK,EAAS,MAAM,CACb,QAAS,mCACT,gBAAiB,UACjB,aAAc,UACd,SAAU,UAChB,CAAK,EACDY,EAAY,MAAQ,GACpBjB,EAAc,GACd,MACD,CAEDmB,EAAQ,MAAM,QAAU,QAExBpB,EAAYC,CAAW,EACpB,KAAKwB,GAAU,CACdN,EAAK,UAAY,GACjBA,EAAK,mBAAmB,YAAaZ,EAAakB,CAAM,CAAC,EAEpDF,EAQHA,EAAS,QAAO,EAPhBA,EAAW,IAAIG,EAAe,aAAc,CAC1C,IAAK,GACL,SAAU,GACV,aAAc,MACd,aAAc,GACxB,CAAS,CAIT,CAAK,EACA,MAAMrB,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CACnD,CAAK,EACA,QAAQ,IAAM,CACbe,EAAQ,MAAM,QAAU,OACxBF,EAAY,MAAQ,GACpBjB,EAAc,EACpB,CAAK,CACL"}